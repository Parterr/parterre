{% extends 'base.html' %}
{% load static %}

{% block content %}
    <link rel="stylesheet" href="{% static 'per_details.css' %}">
    <link rel="stylesheet" href="{% static 'inform.css' %}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">


<style>
    #MainInfo{
        background-color: #1a1a1a;
        color: white;
    }
    #TabletInfo{
        background-color: #1a1a1a;
        color: white;
    }
    .general-info{
        border-top: 1px solid #dbb071;
        border-bottom: 2px solid #dbb071;
        padding: 3%;
        background-color: white;
    }
    @media (min-width: 576px) {
        #info{
            font-size: 2.8rem;
            text-align: center;
        }
        #about{
            font-size: 2.3rem;
            font-weight: 450 !important;
        }
        #time{
            font-size: 2.3rem;
        }
        .duration{
            font-size: 2.5rem;
            margin-top: 2%;
        }
        .dop_dur{
            font-size: 1.9rem;
        }
        #history{
            font-size: 2.3rem;
        }
        #headeer{
            font-size: 3rem;
        }
        #headeeer{
            font-size: 2.7rem;
            margin-top: -4.5%;
        }
        .card-text{
            font-size: 1.9rem;
            text-align: center;
        }
        .card-title{
            font-size: 2.5rem;
            text-align: center;
        }
        #roles{
            font-size: 2rem;
        }
        #dop_role{
            font-size: 2rem;
        }
        #characters{
            margin-right: 2%;
            margin-left: 2%;
            width: 96%;
        }
        #title{
            font-size: 2.9rem;
        }
        #data{
            font-size: 2.7rem;
        }
        #subtitle{
            font-size: 2.2rem;
        }
        #pod2{
            font-size: 2.5rem;
        }
        #no{
            display: none !important;
        }
        #mobile-header{
            box-shadow: 1px 1px 12px 1px rgba(0,0,0,0.11);
            display: block !important;
        }
        .main-info-margin {
            margin-top: 11.5%;
        }
    }

    @media (min-width: 768px) {
        #info{
            font-size: 2.8rem;
            text-align: center;
        }
        #about{
            font-size: 2.3rem;
            font-weight: normal;
        }
        #time{
            font-size: 2.3rem;
        }
        .duration{
            font-size: 2.5rem;
            margin-top: 2%;
        }
        .dop_dur{
            font-size: 1.9rem;
        }
        #history{
            font-size: 2.3rem;
        }
        #headeer{
            font-size: 3rem;
        }
        #headeeer{
            font-size: 2.7rem;
            margin-top: -4.5%;
        }
        .card-text{
            font-size: 1.9rem;
            text-align: center;
        }
        .card-title{
            font-size: 2.5rem;
            text-align: center;
        }
        #roles{
            font-size: 2rem;
        }
        #dop_role{
            font-size: 2rem;
        }
        #characters{
            margin-right: 2%;
            margin-left: 2%;
            width: 96%;
        }
        #title{
            font-size: 2.9rem;
        }
        #data{
            font-size: 2.7rem;
        }
        #subtitle{
            font-size: 2.2rem;
        }
        #pod2{
            font-size: 2.5rem;
        }
        #no{
            display: none !important;
        }
        #mobile-header{
            box-shadow: 1px 1px 12px 1px rgba(0,0,0,0.11);
            display: block !important;
        }
        .main-info-margin {
            margin-top: 11.5%;
        }
    }

    @media (min-width: 992px) {
        #info{
            font-size: 1.4rem;
            text-align: center;
        }
        #about{
            font-size: 1.1rem;
            font-weight: normal;
        }
        #time{
            font-size: 1.3rem;
        }
        .duration{
            font-size: 1.4rem;
            margin-top: 0;
        }
        .dop_dur{
            font-size: 0.9rem;
        }
        #history{
            font-size: 1.1rem;
        }
        #headeer{
            font-size: 1.6rem;
        }
        #headeeer{
            font-size: 1.6rem;
            margin-top: -2.5%;
        }
        .card-text{
            font-size: 0.9rem;
            text-align: center;
        }
        .card-title{
            font-size: 1.2rem;
            text-align: center;
        }
        #roles{
            font-size: 1.1rem;
        }
        #dop_role{
            font-size: 1.1rem;
        }
        #characters{
            margin-right: 0;
            margin-left: 0;
            width: 100%;
        }
        #title{
            font-size: 1.6rem;
        }
        #data{
            font-size: 1.4rem;
        }
        #subtitle1{
            font-size: 1rem;
        }
        #pod{
            font-size: 1rem;
        }
        #mobile-header{
            display: none !important;
        }
        #no{
            display: block !important;
        }
}

    @media (min-width: 1200px) {
        #info{
            font-size: 1.5rem;
            text-align: center;
        }
        #about{
            font-size: 1.1rem;
            font-weight: normal;
        }
        #time{
            font-size: 1.1rem;
        }
        .duration{
            font-size: 1.4rem;
            margin-top: 0;
        }
        .dop_dur{
            font-size: 0.93rem;
        }
        #history{
            font-size: 1.1rem;
        }
        #headeer{
            font-size: 1.8rem;
        }
        #headeeer{
            font-size: 1.8rem;
            margin-top: -3%;
        }
        .card-text{
            font-size: 1.1rem;
            text-align: center;
        }
        .card-title{
            font-size: 1.4rem;
            text-align: center;
        }
        #roles{
            font-size: 1.1rem;
        }
        #dop_role{
            font-size: 1.1rem;
        }
        #characters{
            margin-right: 0;
            margin-left: 0;
            width: 100%;
        }
        #title{
            font-size: 1.6rem;
        }
        #data{
            font-size: 1.3rem;
        }
        #subtitle1{
            font-size: 1.02rem;
        }
        #pod1{
            font-size: 1rem;
        }
        #mobile-header{
            display: none !important;
        }
        #no{
            display: block !important;
        }
    }
    @media (min-width: 1800px) {
        #info{
            font-size: 1.6rem;
            text-align: center;
        }
        #about{
            font-size: 1.3rem;
            font-weight: normal;
        }
        #time{
            font-size: 1.4rem;
        }
        .duration{
            font-size: 1.6rem;
            margin-top: 0;
        }
        .dop_dur{
            font-size: 1.1rem;
        }
        #history{
            font-size: 1.3rem;
        }
        #headeer{
            font-size: 2.2rem;
        }
        #headeeer{
            font-size: 2.2rem;
            margin-top: -3%;
        }
        .card-text{
            font-size: 1.2rem;
            text-align: center;
        }
        .card-title{
            font-size: 1.5rem;
            text-align: center;
        }
        #roles{
            font-size: 1.3rem;
        }
        #dop_role{
            font-size: 1.3rem;
        }
        #characters{
            margin-right: 0;
            margin-left: 0;
            width: 100%;
        }
        #title{
            font-size: 2.2rem;
        }
        #data{
            font-size: 2rem;
        }
        #subtitle1{
            font-size: 1.2rem;
        }
        #pod1{
            font-size: 1.2rem;
        }
        #mobile-header{
            display: none !important;
        }
        #no{
            display: block !important;
        }
    }
</style>

{% include 'header.html' %}

<div id="MainInfo" class="performance-item row mx-0 d-flex align-items-center">
    <div class="col-lg-5 order-lg-1">
        <div id="description-container" class="info mx-3 text-lg-left">
            <p id="title" class="my-1 mt-3 text-uppercase font-weight-bold">{{ performance.title }}</p>
            <p id="data" class="my-3 mb-4">{{ performance.datetime1|date:"d/m - H:i" }}
            {% if performance.datetime2 %}
                , {{ performance.datetime2|date:"d/m - H:i" }}
                {% endif %}
            </p>
            {% if performance.subtitle %}
            <p id="subtitle1" class="my-4">{{ performance.subtitle }}</p>
            {% endif %}
            <a href="{% url 'hall' performance.id %}" id="pod1" class="btn btn-custom mb-3" style="background-color: #dbb071; color: black; padding: 7px 18px; border: none; border-radius: 0px;max-width: 50% ">Приобрести билет</a>
        </div>
    </div>
    <div class="col-lg-7 order-lg-2 p-0 m-0">
        <div class="text-center p-0 m-0">
            <img src="{{ performance.image.url }}" alt="{{ performance.title }}" class="img-fluid">
        </div>
    </div>
        <div id="subtitle2" class="col-12 order-3 mt-3 mb-3 d-none">
            <div id="description-mobile" class="info mx-3">
                {% if performance.subtitle %}
                    <p id="subtitle" class="my-4 text-center">{{ performance.subtitle }}</p>
                {% endif %}
                <a href="{% url 'hall' performance.id %}" id="pod2" class="btn btn-custom mb-4 p-3" style="background-color: #dbb071; color: black; padding: 7px 18px; border: none; border-radius: 0px">Приобрести билет</a>
            </div>
        </div>
    </div>

<div id="TabletInfo" class="performance-item row mx-0 d-none">
    <div class="col-6 order-1">
        <p id="title" class="mt-4 text-uppercase font-weight-bold">{{ performance.title }}</p>
    </div>
    <div class="col-6 order-2 text-right mt-3">
        <p id="data" class="mb-1 font-weight-bold">{{ performance.datetime1|date:"d/m - H:i" }}
            {% if performance.datetime2 %}
                , {{ performance.datetime2|date:"d/m - H:i" }}
            {% endif %}
        </p>
    </div>
    <div class="col-4 order-3">
        {% if performance.subtitle %}
        <p id="subtitle1" class="mb-2">{{ performance.subtitle }}</p>
        {% endif %}
        <a href="{% url 'hall' performance.id %}" id="pod" class="btn btn-custom mb-3 mt-2" style="background-color: #dbb071; color: black; padding: 7px 18px; border: none; border-radius: 0px; width: 98%">Приобрести билет</a>
    </div>
    <div class="col-8 order-4 p-0 m-0">
        <div class="text-center p-0 m-0">
            <img id="tablet-image" src="{{ performance.image.url }}" alt="{{ performance.title }}" class="img-fluid">
        </div>
    </div>
</div>

    {% include 'affiche/preform_header.html' %}

    <div id="general-info" class="general-info">
        <div id="info" class="container">
            <div class="second">
                <p class="font-weight-bold"> {{ performance.title }}</p>
                <p id="time" class="mb-4 font-weight-bold">{{ performance.datetime1|date:"d/m - H:i" }}</p>
                {% if performance.dop_info %}
                    <p id="about" class="my-3 font-weight-normal ">{{ performance.dop_info|linebreaksbr }}</p>
                {% endif %}
            </div>
            <div id="first" class="first mt-3" >
                <p class="duration"><strong>Продолжительность:</strong> {{ performance.duration }}</p>
                <p class="dop_dur"><strong>* Уважаемые зрители!<br> После третьего звонка вход в зрительный зал запрещен.<br> В случае опоздания Вы сможете занять свои места во время антракта.</strong></p>
            </div>
        </div>
    </div>

    {% if performance.background1 %}
    <div id="history" class="container">
        <div class="history ml-4 mt-5 mb-5">
            <p id="headeer" class="text-center font-weight-bold">Акты</p>
            <p class="mt-4 font-weight-bold">І действие</p>
            <p>{{ performance.background1|linebreaksbr }}</p>
        {% endif %}
        {% if performance.background2 %}
            <p class="font-weight-bold">ІІ действие</p>
            <p>{{ performance.background2|linebreaksbr }}</p>
        {% endif %}
        {% if performance.background3 %}
            <p class="font-weight-bold">ІІІ действие</p>
            <p>{{ performance.background3|linebreaksbr }}</p>
        {% endif %}
        </div>
    </div>

    <div style="border-bottom: 2px solid rgba(219,176,113,0.49);"></div>

    {% if performance_creatives %}
    <div class="container mt-5" id="creatives">
        <p id="headeer" class="text-center font-weight-bold">Постановочная команда</p>
        <div class="row mt-5">
            {% for creative in performance_creatives %}
                <div class="col-4 col-sm-12 col-md-12 col-lg-4 col-xl-4">
                    <div class="card" style="border: 0px">
                        <div class="card-body">
                            <p class="card-title" style="color: #af8e5c">{{ creative.role }}</p>
                            <p class="card-title">{{ creative.name }}</p>
                            {% if creative.description %}
                            <p class="card-text">{{ creative.description }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
        {% endfor %}
        </div>
    </div>
    {% endif %}

    <div class="mt-5" style="border-bottom: 2px solid rgba(219,176,113,0.49); margin-bottom: 5%"></div>

    {% if short_roles or long_roles %}
        <div id="characters" class="container mt-5 mb-5 mx-auto" style="border: 2px solid #dbb071">
            <p id="headeeer" class="text-center mb-5 font-weight-bold"><span style="background-color: white; padding: 0% 2% 0% 2%">Действующие лица и исполнители</span></p>
            <div id="roles" class="row mt-4 mb-4 ml-2 mr-2">
                {% for performer in short_roles %}
                <div id="role" class="col-5 col-sm-12 col-md-12 col-lg-6 col-xl-6 mt-4 mb-1">
                    <p style="white-space: pre; color: #987b50">{{ performer.role }}<strong style="float: right; color: black">{% for p in performer.performer.all %} {{ p.name }} {% endfor %}</strong></p>
                </div>
                {% endfor %}
            {% for performer in long_roles %}
                <div class="col-12 mt-4 mb-1 text-center">
                    <p style="white-space: pre; color: #987b50">{{ performer.role }}</p><p><strong>{{ performer.performer.all|join:", " }}</strong></p>
                </div>
                {% endfor %}
            </div>
            <p id="dop_role" class="text-center pt-3">Симфонический оркестр и балетная труппа Казахского национального театра оперы и балета имени Абая</p>
            {% for conductor in performance_conductor %}
                <p id="dop_role" class="text-center">Дирижер - <strong>{{ conductor.name }}</strong>{% if conductor.description %}, {{ conductor.description }}{% endif %}</p>
            {% endfor %}
            <p id="dop_role" class="text-center font-weight-bold pb-4">Театр оставляет за собой право вносить изменения в состав исполнителей</p>
        </div>
    {% endif %}

<script>
function adjustContainerClass() {
    const mainInfo = document.getElementById('MainInfo');
    const tabletInfo = document.getElementById('TabletInfo');
    const info = document.getElementById('info');
    const acts = document.getElementById('history');
    const team = document.getElementById('creatives');
    const about = document.getElementById('about');
    const roles = document.getElementById('characters');
    const subtitle1 = document.getElementById('subtitle1');
    const subtitle2 = document.getElementById('subtitle2');
    const button1 = document.getElementById('pod1');
    const button2 = document.getElementById('pod2');

    if (window.innerWidth >= 992 && window.innerWidth < 1200) {
        tabletInfo.classList.remove('d-none');
        tabletInfo.classList.add('d-flex');
        mainInfo.classList.add('d-none');
        mainInfo.classList.remove('d-flex');
    } else {
        tabletInfo.classList.add('d-none');
        mainInfo.classList.remove('d-none');
        tabletInfo.classList.remove('d-flex');
        mainInfo.classList.add('d-flex');
    }

    if (window.innerWidth < 992) {
        about.classList.remove('font-weight-bold');
        info.classList.remove('container');
        info.classList.add('container-fluid');
        acts.classList.remove('container');
        acts.classList.add('container-fluid');
        team.classList.remove('container');
        team.classList.add('container-fluid');
        roles.classList.remove('container');
        roles.classList.add('container-fluid');
        roles.classList.remove('ml-5');
        roles.classList.add('pr-1');
        roles.classList.remove('mr-5');
        roles.classList.add('pl-1');
        subtitle2.classList.add('d-block');
        subtitle1.classList.add('d-none');
        subtitle2.classList.remove('d-none');
        subtitle1.classList.remove('d-block');
        button2.classList.add('d-block');
        button1.classList.add('d-none');
        button2.classList.remove('d-none');
        button1.classList.remove('d-block');
    } else {
        info.classList.remove('container-fluid');
        about.classList.add('font-weight-bold');
        info.classList.add('container');
        acts.classList.remove('container-fluid');
        acts.classList.add('container');
        team.classList.remove('container-fluid');
        team.classList.add('container');
        roles.classList.remove('container-fluid');
        roles.classList.add('container');
        roles.classList.remove('pl-1');
        roles.classList.add('mr-5');
        roles.classList.remove('pr-1');
        roles.classList.add('ml-5');
        subtitle2.classList.add('d-none');
        subtitle1.classList.add('d-block');
        subtitle2.classList.remove('d-block');
        subtitle1.classList.remove('d-none');
        button2.classList.add('d-none');
        button1.classList.add('d-block');
        button2.classList.remove('d-block');
        button1.classList.remove('d-none');
    }
}

adjustContainerClass();

window.addEventListener('resize', adjustContainerClass);
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


{% endblock%}